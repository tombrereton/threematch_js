(function(){function q(){for(var a={},b=0;b<r;b++)a[b]={};return a}function J(a,b){return 0>a||r<=a||0>b||u<=b?-1:k[a][b]}function Y(a,b){return-1!==k[a][b]?{y:a,x:b,gem:k[a][b]}:-1}function hb(a,b){return J(a,b).gemType===J(a-1,b).gemType&&J(a,b).gemType===J(a-2,b).gemType||J(a,b).gemType===J(a,b-1).gemType&&J(a,b).gemType===J(a,b-2).gemType}function Ha(a){for(var b,c=[],f=a?r:u,d=a?u:r,g=0;g<f;g++)for(var e=-1,h=1,m=0;m<d;m++){var p=(a?k[g][m]:k[m][g]).gemType;p===e&&void 0!==p?(h++,3===h?(b=a?
{y:g,x:m-2,gemType:p,matchLength:h}:{y:m-2,x:g,gemType:p,matchLength:h},c.push(b)):3<h&&b.matchLength++):(e=p,h=1)}return c}function Ia(a,b){a.forEach(function(a){a.orientation=b})}function Ja(){S=Ha(!0);Ia(S,0);T=Ha(!1);Ia(T,1);return S.length||T.length}function Ka(a){return 3<a.matchLength}function ra(a){for(var b=[],c=0;c<a.matchLength;c++)b.push(Y(a.orientation?a.y+c:a.y,a.orientation?a.x:a.x+c));return b}function ib(){var a=q();S.filter(Ka).concat(T.filter(Ka)).forEach(function(b){var c=b.y,
f=b.x,d={gemType:b.gemType,bonusType:4<b.matchLength?3:2};void 0!==U&&ra(b).forEach(function(a){U.forEach(function(b){a.y===b[0]&&a.x===b[1]&&(c=a.y,f=a.x)})});a[c][f]=d});return a}function jb(){var a=q();S.forEach(function(b){T.forEach(function(c){b.gemType===c.gemType&&c.y<=b.y&&b.y<=c.y+c.matchLength&&b.x<=c.x&&c.x<=b.x+b.matchLength&&(a[b.y][c.x]={gemType:b.gemType,bonusType:4})})});return a}function La(a,b){b.forEach(function(b){a[b.y][b.x]=b.gem})}function sa(a,b,c){b.forEach(function(b){void 0===
c[b.y][b.x]&&(a[b.y][b.x]=b.gem)})}function kb(){Z=q();aa=q();S.forEach(function(a){La(Z,ra(a))});T.forEach(function(a){La(aa,ra(a))})}function lb(a,b,c){b=[];for(c=0;c<u;c++)-1!==k[a][c]&&b.push(Y(a,c));return b}function mb(a,b,c){a=[];for(c=0;c<r;c++)-1!==k[c][b]&&a.push(Y(c,b));return a}function Ma(a,b){var c=q(),f;for(f in a)for(var d in a[f]){var g=a[f][d];if(void 0===v[f][d]){v[f][d]=g;var e=!0}else e=!1;if(e)switch(g.bonusType){case 2:sa(c,(b?lb:mb)(f,d,g),v);break;case 3:e=[];g=g.gemType;
for(var h=0;h<r;h++)for(var m=0;m<u;m++){var p=k[h][m];-1!==p&&p.gemType===g&&e.push(Y(h,m))}sa(c,e,v);break;case 4:p=f;m=d;e=[];p=parseInt(p);m=parseInt(m);g=Math.min(r,p+2);h=Math.max(0,m-1);m=Math.min(u,m+2);for(p=Math.max(0,p-1);p<g;p++)for(var l=h;l<m;l++)-1!==k[p][l]&&e.push(Y(p,l));sa(c,e,v)}}return c}function Na(a){for(var b in a)for(var c in a[b])return!0;return!1}function ta(a,b,c){this.gemType=a;this.bonusType=b;this.gemSprite=c}function Oa(a,b){this.layer=a;this.iceSprite=b}function nb(a,
b){this.portion=a;this.medalSprite=b}function ua(a){for(var b=0;b<r;b++){a[b]=[];for(var c=0;c<u;c++)a[b][c]=-1}}function va(a,b,c){b=B+e/2+b*e;c=K+e/2+c*e;this.gemType=a;c=d.add.sprite(c,b,"threematch","stone"+a+"/01");c.anchor.setTo(.5,.5);c.width=n;c.height=n;c.inputEnabled=!0;c.animations.add("explode",[1,2,3,4,5,6,7,8,9],25,!1);c.animations.add("type2",["stone"+a+"/02"],5,!1);c.animations.add("type3",["stone"+a+"/03"],10,!1);c.animations.add("type4",["stone"+a+"/04"],10,!1);return c}function ob(a,
b){a=d.add.sprite(K+e+b*e,B+e+a*e,"threematch","medal/01");a.anchor.setTo(.5,.5);a.width=2*n;a.height=2*n;b=Phaser.Animation.generateFrameNames("medal/",1,4,"",2);var c=Phaser.Animation.generateFrameNames("medal/",4,1,"",2);b.push(c);a.animations.add("spin",b,10,!0).onLoop.add(pb,this);return a}function Pa(a,b){-1!==z[a][b]&&d.add.tween(z[a][b].iceSprite).to({alpha:0},800,Phaser.Easing.Linear.None,!0,0,0,!1).onComplete.add(function(){-1!==z[a][b]&&z[a][b].iceSprite.kill();z[a][b]=-1;for(var c=0;c<
V.length;c++){var d=V[c][0],A=V[c][1],g;if(g=-1===z[d][A])a:{for(g=0;2>g;g++)for(var e=0;2>e;e++)if(-1!==z[d+g][A+e]){g=!1;break a}g=!0}g&&(qb(d,A),V.splice(c,1))}})}function qb(a,b){rb();ea++;var c=P[a][b].medalSprite;wa.remove(c);xa.add(c);d.world.bringToTop(xa);c.events.onAnimationComplete.add(function(){for(var d=0;2>d;d++)for(var A=0;2>A;A++){var e=a+d,h=b+A;c.kill();P[e][h]=-1}});c.scale.setTo(2);c.x=d.world.centerX;c.y=d.world.centerY;c.anchor.setTo(.5,.5);c.play("spin")}function pb(a,b){3===
b.loopCount&&(b.loop=!1)}function sb(a,b,c,d){var f=va(c,a,b);2===d?f.play("type2"):3===d?f.play("type3"):4===d&&f.play("type4");k[a][b]=new ta(c,d,f);ya.add(f)}function Qa(){for(var a="",b=0;b<r;b++)for(var c=0;c<u;c++){var d=k[b][c].gemType+"\t"+k[b][c].bonusType+"\t",e=-1;-1!==z[b][c]&&(e=z[b][c].layer);var g="-1";-1!==fa[b][c]?g=fa[b][c]:-1===z[b][c]&&-1!==P[b][c]&&(g=P[b][c].portion,fa[b][c]=g);d=d+e+"\t"+g+"\t";a+=d}return a}function Ra(){(E=prompt("please enter your nickname for scoring:"))?
localStorage.nickname=E:(E="default",localStorage.nickname=void 0);za(E)}function tb(a){ha&&!ia&&(Sa?(t=Math.floor((d.input.pointer1.y-B)/e),x=Math.floor((d.input.pointer1.x-K)/e)):(t=Math.floor((d.input.mousePointer.y-B)/e),x=Math.floor((d.input.mousePointer.x-K)/e)),a=Ta(t,x),-1!==a&&(null===h?(a.gemSprite.height=1.2*n,a.gemSprite.width=1.2*n,a.gemSprite.bringToTop(),h=a,L=t,M=x,U=[[t,x],[L,M]],d.input.addMoveCallback(Aa)):(U=[[t,x],[L,M]],a===h?(h.gemSprite.width=n,h.gemSprite.height=n,M=L=h=null):
1===Math.abs(t-L)+Math.abs(x-M)?(h.gemSprite.width=n,h.gemSprite.height=n,Ba(h,a,!0)):(h.gemSprite.width=n,h.gemSprite.height=n,a.gemSprite.height=1.2*n,a.gemSprite.width=1.2*n,h=a,L=t,M=x))))}function Ba(a,b,c){ha=!1;var f=k[F(a)][G(a)].gemSprite,A=k[F(b)][G(b)].gemSprite,g=B+e/2+F(b)*e,l=K+e/2+G(b)*e,n=B+e/2+F(a)*e,m=K+e/2+G(a)*e;d.add.tween(f).to({y:g,x:l},200,Phaser.Easing.Linear.None,!0);f=d.add.tween(A).to({y:n,x:m},200,Phaser.Easing.Linear.None,!0);A=k[F(a)][G(a)];k[F(a)][G(a)]=b;k[F(b)][G(b)]=
A;f.onComplete.add(function(){var d=Ja();!d&&c?Ba(a,b,!1):d?(H--,d=("      "+H).slice(-6),Ua.setText("Moves: "+d),d=100/ja*(ja-H),50>=d?document.getElementById("prog-success").style.width=d+"%":75>=d?(d-=50,document.getElementById("prog-success").style.width="50%",document.getElementById("prog-warning").style.width=d+"%"):(d-=75,document.getElementById("prog-warning").style.width="25%",document.getElementById("prog-danger").style.width=d+"%"),Ca=1,ba=W=0,Da=!0,ka(),h=null):(h=null,ha=!0)})}function Aa(a,
b,c){if(0===a.id&&null!==h){a=b-h.gemSprite.x;c-=h.gemSprite.y;var f=b=0;Math.abs(a)>e/2?(f=0<a?1:-1,b=0):Math.abs(c)>e/2&&(b=0<c?1:-1,f=0);0!==b+f&&(t=F(h),x=G(h),a=Ta(t+b,x+f),-1!==a&&(L=F(a),M=G(a),U=[[t,x],[L,M]],d.input.deleteMoveCallback(Aa),h.gemSprite.width=n,h.gemSprite.height=n,Ba(h,a,!0)))}}function ub(){I+=100*Ca*(Q.length+y.length+2*Ea+5*ea);ea=0;var a=("        "+I).slice(-8);Fa.setText("Score: "+a)}function rb(){N--;var a=("      "+N).slice(-6);Va.setText("Medals: "+a)}function F(a){return Math.floor(a.gemSprite.y/
e)}function G(a){return Math.floor(a.gemSprite.x/e)}function Ta(a,b){return 0>a||a>=r||0>b||b>=u?-1:k[a][b]}function vb(a){d.input.deleteMoveCallback(Aa)}function wb(){ba=Q.length+y.length;for(var a in Q){var b=Q[a].y,c=Q[a].x,d=k[b][c].gemSprite;d.events.onAnimationComplete.add(function(){ba--;la()});d.play("explode",30,!1,!0);Pa(b,c);k[b][c]=-1}}function xb(){for(var a in y){var b=y[a].y,c=y[a].x,f=y[a].gemType,e=y[a].bonusType;k[b][c].gemSprite.kill();k[b][c]=-1;Pa(b,c);sb(b,c,f,e);e=k[b][c].gemSprite;
b=d.add.tween(e).to({x:e.position.x+5},50,Phaser.Easing.Bounce.InOut,!1,0,0,!0);c=d.add.tween(e).to({x:e.position.x-5},50,Phaser.Easing.Bounce.InOut,!1,0,0,!0);f=d.add.tween(e).to({x:e.position.x+5},50,Phaser.Easing.Bounce.InOut,!1,0,0,!0);e=d.add.tween(e).to({x:e.position.x-5},50,Phaser.Easing.Bounce.InOut,!1,0,0,!0);b.chain(c);c.chain(f);f.chain(e);b.start();e.onComplete.add(function(){ba--;la()})}ub();y=[]}function yb(){W=O.length;for(var a=0;a<O.length;a++){var b=O[a][0],c=O[a][1],f=O[a][2],h=
O[a][3],g=B+e/2+b*e;d.add.tween(k[f][h].gemSprite).to({y:g},600,Wa,!0).onComplete.add(function(){W--;ka()});g=k[b][c];k[b][c]=k[f][h];k[f][h]=g}}function zb(){for(var a=0;a<ma.length;a++){var b=ma[a];W+=b;for(var c=0;c<b;c++){var f=Math.floor(Math.random()*Xa),h=va(f,-c-1,a),g=B+e/2+(b-c-1)*e;d.add.tween(h).to({y:g},600,Wa,!0).onComplete.add(function(){W--;ka()});k[b-c-1][a]=new ta(f,1,h)}}}function ka(){if(0===W)if(Da){R=q();var a=ib(),b=jb();for(f in b)for(var c in b[f])R[f][c]=b[f][c];for(f in a)for(c in a[f])R[f][c]=
a[f][c];kb();ca=!0;la()}else{ha=!0;h=null;0===N?(ia=!0,I+=Math.floor(I/(ja-H)*H),ea=0,a=("        "+I).slice(-8),Fa.setText("Score: "+a),a=d.add.text(d.world.centerX,d.world.centerY,"You Won!",{font:"bold 40pt Arial",fill:"#000"}),a.anchor.setTo(.5,.5),Ya(E,C,I,D,!0),Za()):0===H&&(ia=!0,a=d.add.text(d.world.centerX,d.world.centerY,"Game Over",{font:"bold 40pt Arial",fill:"#000"}),a.anchor.setTo(.5,.5),Ya(E,C,I,D,!1),Za());a=na;b=C;var f=da++;c=$a-N;var e=U;e=e[0][0].valueOf()+"-"+e[0][1]+"-"+e[1][0]+
"-"+e[1][1];a(b,f,c.valueOf()+"\t"+I.valueOf()+"\t"+e);na(C,da++,Qa())}}function la(){if(0===ba)if(Na(Z)||Na(aa)){v=q();Z=Ma(Z,ca);aa=Ma(aa,!ca);ca=!ca;Q=[];y=[];Ea=0;for(var a in v)for(var b in v[a])1!==v[a][b].bonusType&&Ea++,void 0===R[a][b]&&-1!==k[a][b]&&Q.push({y:a,x:b});for(a in R)for(b in R[a]){var c=R[a][b];y.push({y:a,x:b,gemType:c.gemType,bonusType:c.bonusType})}wb();xb();la()}else{O=[];ma=[];for(a=0;a<k[0].length;a++){b=0;for(c=k.length-1;0<=c&&-1!==k[c][a];c--)b++;for(var d=c-1;0<=d;d--)-1!==
k[d][a]&&(O.push([c--,a,d,a]),b++);ma.push(r-b)}yb();zb();Da=Ja();Ca++;ka()}}function Za(){if(C===C){D=(D+1)%3;var a=(D+2)%3,b=D%3,c="Level"+a,e="tabLevel"+b;b="Level"+b;document.getElementById("tabLevel"+a).classList.remove("active");document.getElementById(c).classList.remove("active");document.getElementById(e).classList.add("active");document.getElementById(b).classList.add("active");document.getElementById("prog-danger").style.width="0%";document.getElementById("prog-warning").style.width="0%";
document.getElementById("prog-success").style.width="0%";d.input.onDown.add(Ga.create);d.add.text(d.world.centerX,d.world.centerY+l/4,"Click for next level",{font:"bold 32pt Helvetica",fill:"#000"}).anchor.setTo(.5,.5)}}function Ab(a,b,c){$.post("php/start_file.php",{gameID:a,moves:b,medals:c},function(a,b){})}function na(a,b,c){$.post("php/add_data.php",{gameID:a,dataString:b+"\t"+c},function(a,b){})}function Ya(a,b,c,d,e){$.post("php/scores_db.php",{operationType:"sendScore",nickname:a,gameID:b,
score:c,level:d,win:e},function(b,c){za(a);X(0);X(1);X(2)})}function X(a){$.post("php/scores_db.php",{operationType:"getHighScores",level:a},function(b,c){0===a?document.getElementById("Level0").innerHTML=b:1===a?document.getElementById("Level1").innerHTML=b:2===a&&(document.getElementById("Level2").innerHTML=b)})}function za(a){$.post("php/scores_db.php",{operationType:"getUserScore",nickname:a},function(b,c){document.getElementById("userScoreTitle").innerHTML="High Score: "+a;document.getElementById("userHighScore").innerHTML=
b})}var y=[],Q=[],O=[],ma=[],Ea=0,S=[],T=[],Z=q(),aa=q(),v=q(),R=q(),r=9,u=9,ja,H,Xa=6,oa=5,ia=!1,D=0,Bb=[3,4,5],Cb=[5,7,9],Db=[20,25,30],$a,da,ab=window,bb=document,cb=bb.documentElement,db=bb.getElementsByTagName("body")[0],eb=ab.innerWidth||cb.clientWidth||db.clientWidth,fb=ab.innerHeight||cb.clientHeight||db.clientHeight;if(4*(eb-20)/3<.8*fb){var w=eb-20;var l=4*w/3}else l=Math.min(.8*fb,600),w=3*l/4;var e=(w-w/50)/u,K=(w-u*e)/2,B=l/64,n=.9*e,pa=.7*e,Wa=Phaser.Easing.Linear.None,Ca=1,V=[],h,wa,
gb,ya,xa,k=[],z=[],P=[],fa=[],I=0,N,ea=0,qa={fontSize:26*l/600+"px",fill:"#000"},C,Sa=!1;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,
4)))Sa=!0;var Fa,Ua,Va,ha=!0,t,x,L,M,U,W,ba,ca,Da,Ga={create:function(){d.input.onDown.remove(Ga.create);C=(new Date).getTime()+"-"+Math.floor(1E16*Math.random());ia=!1;da=I=0;ja=H=Db[D];$a=N=Bb[D];oa=Cb[D];d.physics.startSystem(Phaser.Physics.ARCADE);var a=d.add.sprite(0,0,"stone");a.height=l;a.width=w;a=d.add.sprite(0,l/30,"ground");a.height=l;a.width=w;a=d.add.sprite(K,B,"grid");a.height=a.width=r*e;wa=d.add.group();gb=d.add.group();ya=d.add.group();xa=d.add.group();a=N;var b=wa;ua(P);ua(fa);V=
[];for(var c=0;c<a;){var f=parseInt(Math.random()*oa)+r-oa,n=parseInt(Math.random()*u),g;a:if(f<r-1&&n<u-1){for(g=0;2>g;g++)for(var q=0;2>q;q++)if(-1!==P[f+g][n+q]){g=!1;break a}g=!0}else g=!1;if(g){g=b;for(q=0;2>q;q++)for(var t=0;2>t;t++){var m=t+2*q,p=f+q,x=n+t;if(0===m){var y=ob(f,n);g.add(y)}else y=void 0;P[p][x]=new nb(m,y);0===m&&V.push([p,x,m])}c++}}a=gb;ua(z);for(b=0;b<r;b++)for(c=0;c<u;c++)b>=r-oa?(f=d.add.sprite(K+e/2+c*e,B+e/2+b*e,"threematch","ice"),f.anchor.setTo(.5,.5),f.width=1.05*
e,f.height=1.05*e,a.add(f),z[b][c]=new Oa(1,f)):z[b][c]=new Oa(-1,null);a=ya;for(b=0;b<r;b++)for(k[b]=[],c=0;c<u;c++){do f=Math.floor(Math.random()*Xa),k[b][c]=new ta(f,1,v);while(hb(b,c));var v=va(f,b,c);k[b][c].gemSprite=v;a.add(v)}h=null;Ab(C,H,N);na(C,da++,"start");na(C,da++,Qa());d.input.onDown.add(tb);d.input.onUp.add(vb);v="        0".slice(-8);a=("      "+H).slice(-6);b=("      "+N).slice(-6);c=16*w/450;Fa=d.add.text(c,l-3*pa,"Score: "+v,qa);Ua=d.add.text(c,l-2*pa,"Moves: "+a,qa);Va=d.add.text(c,
l-1*pa,"Medals: "+b,qa);d.add.text(w-w/4,l-1*pa,"Level: "+(D+1),qa)}};document.getElementById("progress").style.width=w+"px";var d=new Phaser.Game(w,l,Phaser.AUTO,"game");d.state.add("load",{preload:function(){d.add.text(d.world.centerX,d.world.centerY,"loading...",{font:"30px Helvetica",fill:"#ffffff"}).anchor.setTo(.5);d.load.image("stone","assets/stone_light_2.jpg");d.load.image("ground","assets/ground.png");d.load.image("grid","assets/grid.png");d.load.atlasJSONArray("threematch","assets/threematch.png",
"assets/threematch.json")},create:function(){d.state.start("intro")}});d.state.add("intro",{create:function(){var a=d.add.sprite(0,0,"stone");a.height=l;a.width=w;d.add.text(d.world.centerX,d.world.centerY-l/4,"Gem Island",{font:"30px Helvetica",fill:"#000"}).anchor.setTo(.5);a=d.add.text(d.world.centerX,d.world.centerY,"Free the medals...",{font:"26px Helvetica",fill:"#000"});a.anchor.setTo(.5);a=d.add.text(d.world.centerX,d.world.centerY+7*l/16,"Click to start",{font:"26px Helvetica",fill:"#000"});
a.anchor.setTo(.5);a=d.add.sprite(d.world.centerX-1*w/8,d.world.centerY-3*l/16,"threematch","stone0/01");a.anchor.setTo(.5,.5);a=d.add.sprite(d.world.centerX,d.world.centerY-3*l/16,"threematch","stone2/01");a.anchor.setTo(.5,.5);a=d.add.sprite(d.world.centerX+1*w/8,d.world.centerY-3*l/16,"threematch","stone3/01");a.anchor.setTo(.5,.5);a=d.add.sprite(d.world.centerX,d.world.centerY+3*l/16,"threematch","medal/01");a.anchor.setTo(.5,.5);a.width=2*n;a.height=2*n;var b=Phaser.Animation.generateFrameNames("medal/",
1,4,"",2),c=Phaser.Animation.generateFrameNames("medal/",4,1,"",2);b.push(c);a.animations.add("spin",b,10,!0);a.play("spin");d.input.onDown.add(this.start)},start:function(){d.state.start("play")}});d.state.add("play",Ga);d.state.start("load");document.getElementById("changeName").onclick=Ra;X(0);X(1);X(2);var E=localStorage.nickName||null;null===E||""===E?Ra():za(E)})();
