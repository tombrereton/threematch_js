var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(e,h,n){e instanceof String&&(e=String(e));for(var y=e.length,B=0;B<y;B++){var ca=e[B];if(h.call(n,ca,B,e))return{i:B,v:ca}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,h,n){e!=Array.prototype&&e!=Object.prototype&&(e[h]=n.value)};
$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(e,h,n,y){if(h){n=$jscomp.global;e=e.split(".");for(y=0;y<e.length-1;y++){var B=e[y];B in n||(n[B]={});n=n[B]}e=e[e.length-1];y=n[e];h=h(y);h!=y&&null!=h&&$jscomp.defineProperty(n,e,{configurable:!0,writable:!0,value:h})}};
$jscomp.polyfill("Array.prototype.find",function(e){return e?e:function(e,n){return $jscomp.findInternal(this,e,n).v}},"es6","es3");$jscomp.checkStringArgs=function(e,h,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(h instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""};
$jscomp.polyfill("String.prototype.repeat",function(e){return e?e:function(e){var h=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var y="";e;)if(e&1&&(y+=h),e>>>=1)h+=h;return y}},"es6","es3");
(function(){function e(){for(var a={},b=0;b<p;b++)a[b]={};return a}function h(a,b){return 0>a||p<=a||0>b||q<=b?-1:k[a][b].gemType}function n(a,b){return-1!==k[a][b]?{y:a,x:b,gem:k[a][b]}:-1}function y(a,b){return h(a,b)===h(a-1,b)&&h(a,b)===h(a-2,b)||h(a,b)===h(a,b-1)&&h(a,b)===h(a,b-2)}function B(a){for(var b,c=[],f=a?p:q,d=a?q:p,w=0;w<f;w++)for(var e=-1,g=1,h=0;h<d;h++){var r=(a?k[w][h]:k[h][w]).gemType;r===e&&void 0!==r?(g++,3===g?(b=a?{y:w,x:h-2,gemType:r,matchLength:g}:{y:h-2,x:w,gemType:r,matchLength:g},
c.push(b)):3<g&&b.matchLength++):(e=r,g=1)}return c}function ca(a,b){a.forEach(function(a){a.orientation=b})}function sa(){V=B(!0);ca(V,0);W=B(!1);ca(W,1);return V.length||W.length}function Ia(a){return 3<a.matchLength}function ta(a){for(var b=[],c=0;c<a.matchLength;c++)b.push(n(a.orientation?a.y+c:a.y,a.orientation?a.x:a.x+c));return b}function hb(){var a=e();V.filter(Ia).concat(W.filter(Ia)).forEach(function(b){var c=b.y,f=b.x,d={gemType:b.gemType,bonusType:4<b.matchLength?3:2};void 0!==X&&ta(b).forEach(function(a){X.forEach(function(b){a.y===
b[0]&&a.x===b[1]&&(c=a.y,f=a.x)})});a[c][f]=d});return a}function ib(){var a=e();V.forEach(function(b){W.forEach(function(c){b.gemType===c.gemType&&c.y<=b.y&&b.y<=c.y+c.matchLength&&b.x<=c.x&&c.x<=b.x+b.matchLength&&(a[b.y][c.x]={gemType:b.gemType,bonusType:4})})});return a}function Ja(a,b){b.forEach(function(b){a[b.y][b.x]=b.gem})}function ua(a,b,c){b.forEach(function(b){void 0===c[b.y][b.x]&&(a[b.y][b.x]=b.gem)})}function jb(){da=e();ea=e();V.forEach(function(a){Ja(da,ta(a))});W.forEach(function(a){Ja(ea,
ta(a))})}function kb(a,b,c){b=[];for(c=0;c<q;c++)-1!==k[a][c]&&b.push(n(a,c));return b}function lb(a,b,c){a=[];for(c=0;c<p;c++)-1!==k[c][b]&&a.push(n(c,b));return a}function Ka(a,b){var c=e(),f;for(f in a)for(var d in a[f]){var w=a[f][d];if(void 0===J[f][d]){J[f][d]=w;var g=!0}else g=!1;if(g)switch(w.bonusType){case 2:ua(c,(b?kb:lb)(f,d,w),J);break;case 3:g=[];w=w.gemType;for(var h=0;h<p;h++)for(var m=0;m<q;m++){var r=k[h][m];-1!==r&&r.gemType===w&&g.push(n(h,m))}ua(c,g,J);break;case 4:r=f;m=d;g=
[];r=parseInt(r);m=parseInt(m);w=Math.min(p,r+2);h=Math.max(0,m-1);m=Math.min(q,m+2);for(r=Math.max(0,r-1);r<w;r++)for(var l=h;l<m;l++)-1!==k[r][l]&&g.push(n(r,l));ua(c,g,J)}}return c}function La(a){for(var b in a)for(var c in a[b])return!0;return!1}function mb(){for(var a=0;a<k.length;a++)for(var b=0;b<k[a].length;b++)for(var c=0;c<Ma.length;c++){var f=Ma[c];if(-1!==h(a+f[0][0],b+f[0][1])&&h(a+f[0][0],b+f[0][1])===h(a+f[1][0],b+f[1][1])&&h(a+f[0][0],b+f[0][1])===h(a+f[2][0],b+f[2][1])||-1!==h(a+
f[0][1],b+f[0][0])&&h(a+f[0][1],b+f[0][0])===h(a+f[1][1],b+f[1][0])&&h(a+f[0][1],b+f[0][0])===h(a+f[2][1],b+f[2][0]))return!0}return!1}function va(a,b,c){this.gemType=a;this.bonusType=b;this.gemSprite=c}function Na(a,b){this.layer=a;this.iceSprite=b}function nb(a,b){this.portion=a;this.medalSprite=b}function ob(a,b){Oa(Y);Z=[];for(var c=0;c<a;){var f=parseInt(Math.random()*ha)+p-ha,d=parseInt(Math.random()*q),e;a:if(f<p-1&&d<q-1){for(e=0;2>e;e++)for(var g=0;2>g;g++)if(-1!==Y[f+e][d+g]){e=!1;break a}e=
!0}else e=!1;if(e){e=b;for(g=0;2>g;g++)for(var h=0;2>h;h++){var k=h+2*g,r=f+g,m=d+h;if(0===k){var l=pb(f,d);e.add(l)}else l=void 0;Y[r][m]=new nb(k,l);0===k&&Z.push([r,m,k])}c++}}}function rb(a){Oa(z);for(var b=0;b<p;b++)for(var c=0;c<q;c++)if(b>=p-ha){var f=d.add.sprite(K+g/2+c*g,C+g/2+b*g,"threematch","ice");f.anchor.setTo(.5,.5);f.width=1.05*g;f.height=1.05*g;a.add(f);z[b][c]=new Na(1,f)}else z[b][c]=new Na(-1,null)}function sb(a){for(var b=0;b<p;b++){k[b]=[];for(var c=0;c<q;c++){do{var f=Math.floor(Math.random()*
Pa);k[b][c]=new va(f,1,d)}while(y(b,c));var d=wa(f,b,c);k[b][c].gemSprite=d;a.add(d)}}m=null}function Oa(a){for(var b=0;b<p;b++){a[b]=[];for(var c=0;c<q;c++)a[b][c]=-1}}function wa(a,b,c){b=C+g/2+b*g;c=K+g/2+c*g;this.gemType=a;c=d.add.sprite(c,b,"threematch","stone"+a+"/01");c.anchor.setTo(.5,.5);c.width=u;c.height=u;c.inputEnabled=!0;c.animations.add("explode",[1,2,3,4,5,6,7,8,9],25,!1);c.animations.add("type2",["stone"+a+"/02"],5,!1);c.animations.add("type3",["stone"+a+"/03"],10,!1);c.animations.add("type4",
["stone"+a+"/04"],10,!1);return c}function pb(a,b){a=d.add.sprite(K+g+b*g,C+g+a*g,"threematch","medal/01");a.anchor.setTo(.5,.5);a.width=2*u;a.height=2*u;b=Phaser.Animation.generateFrameNames("medal/",1,4,"",2);var c=Phaser.Animation.generateFrameNames("medal/",4,1,"",2);b.push(c);a.animations.add("spin",b,10,!0).onLoop.add(tb,this);return a}function Qa(a,b){-1!==z[a][b]&&d.add.tween(z[a][b].iceSprite).to({alpha:0},800,Phaser.Easing.Linear.None,!0,0,0,!1).onComplete.add(function(){-1!==z[a][b]&&z[a][b].iceSprite.kill();
z[a][b]=-1;for(var c=0;c<Z.length;c++){var f=Z[c][0],d=Z[c][1],e;if(e=-1===z[f][d])a:{for(e=0;2>e;e++)for(var g=0;2>g;g++)if(-1!==z[f+e][d+g]){e=!1;break a}e=!0}e&&(ub(f,d),Z.splice(c,1))}})}function ub(a,b){vb();D+=4E3*(ia-1);var c=("        "+D).slice(-8);ja.setText("Score: "+c);var f=Y[a][b].medalSprite;xa.remove(f);ya.add(f);d.world.bringToTop(ya);f.events.onAnimationComplete.add(function(){f.kill()});f.scale.setTo(2);f.x=d.world.centerX;f.y=d.world.centerY;f.anchor.setTo(.5,.5);f.play("spin")}
function tb(a,b){3===b.loopCount&&(b.loop=!1)}function wb(a,b,c,f){var d=wa(c,a,b);2===f?d.play("type2"):3===f?d.play("type3"):4===f&&d.play("type4");k[a][b]=new va(c,f,d);za.add(d)}function Aa(){for(var a=""+D+"\t"+(Ra-O)+"\t",b=0;b<p;b++)for(var c=0;c<q;c++){var f=Ba[b][c].gemType+"\t"+Ba[b][c].bonusType+"\t",d=-1;-1!==z[b][c]&&(d=z[b][c].layer);var e=-1;-1===z[b][c]&&-1!==Y[b][c]&&(e=Y[b][c].portion);f=f+d+"\t"+e+"\t";a+=f}return a}function Sa(){var a="Please enter your nickname for scoring:";
for(v="";!v;)v=prompt(a),!v||v.match(/^ +$/)?(v="default",localStorage.nickName=""):v.match(/^.{21,}$/)?(a="Please enter your nickname for scoring, 20 characters max:",v=""):v.match(/[^\w ]/)?(a="Please enter your nickname for scoring, alphanumerics and spaces only:",v=""):localStorage.nickName=v;Ca(v)}function Ta(){$(document).profanityFilter({externalSwears:"js/swearWords.json"})}function xb(a){ka&&!la&&(Ua?(E=Math.floor((d.input.pointer1.y-C)/g),F=Math.floor((d.input.pointer1.x-K)/g)):(E=Math.floor((d.input.mousePointer.y-
C)/g),F=Math.floor((d.input.mousePointer.x-K)/g)),a=Va(E,F),-1!==a&&(null===m?(a.gemSprite.height=1.2*u,a.gemSprite.width=1.2*u,a.gemSprite.bringToTop(),m=a,P=E,Q=F,X=[[E,F],[P,Q]],d.input.addMoveCallback(Da)):(X=[[E,F],[P,Q]],a===m?(m.gemSprite.width=u,m.gemSprite.height=u,Q=P=m=null):1===Math.abs(E-P)+Math.abs(F-Q)?(m.gemSprite.width=u,m.gemSprite.height=u,Ea(m,a,!0)):(m.gemSprite.width=u,m.gemSprite.height=u,a.gemSprite.height=1.2*u,a.gemSprite.width=1.2*u,m=a,P=E,Q=F))))}function Ea(a,b,c){ka=
!1;Ba=$.extend(!0,[],k);var f=k[L(a)][M(a)].gemSprite,e=k[L(b)][M(b)].gemSprite,h=C+g/2+L(b)*g,l=K+g/2+M(b)*g,n=C+g/2+L(a)*g,p=K+g/2+M(a)*g;d.add.tween(f).to({y:h,x:l},200,Phaser.Easing.Linear.None,!0);f=d.add.tween(e).to({y:n,x:p},200,Phaser.Easing.Linear.None,!0);e=k[L(a)][M(a)];k[L(a)][M(a)]=b;k[L(b)][M(b)]=e;f.onComplete.add(function(){var d=sa();if(!d&&c)Ea(a,b,!1);else if(d){N--;d=("      "+N).slice(-6);Wa.setText("Moves left: "+d);d=100/ma*(ma-N);50>=d?document.getElementById("prog-success").style.width=
d+"%":75>=d?(d-=50,document.getElementById("prog-success").style.width="50%",document.getElementById("prog-warning").style.width=d+"%"):(d-=75,document.getElementById("prog-warning").style.width="25%",document.getElementById("prog-danger").style.width=d+"%");aa(G,S++,Aa());d=aa;var f=G,e=S++,g=X;g=g[0][0].valueOf()+"-"+g[0][1]+"-"+g[1][0]+"-"+g[1][1];d(f,e,g);ia=1;A=0;na();m=null}else m=null,ka=!0})}function Da(a,b,c){if(0===a.id&&null!==m){a=b-m.gemSprite.x;c-=m.gemSprite.y;var f=b=0;Math.abs(a)>
g/2?(f=0<a?1:-1,b=0):Math.abs(c)>g/2&&(b=0<c?1:-1,f=0);0!==b+f&&(E=L(m),F=M(m),a=Va(E+b,F+f),-1!==a&&(P=L(a),Q=M(a),X=[[E,F],[P,Q]],d.input.deleteMoveCallback(Da),m.gemSprite.width=u,m.gemSprite.height=u,Ea(m,a,!0)))}}function yb(){D+=100*ia*(T.length+H.length+5*Fa);var a=("        "+D).slice(-8);ja.setText("Score: "+a)}function vb(){O--;var a=("      "+O).slice(-6);Xa.setText("Medals left: "+a)}function L(a){return Math.floor(a.gemSprite.y/g)}function M(a){return Math.floor(a.gemSprite.x/g)}function Va(a,
b){return 0>a||a>=p||0>b||b>=q?-1:k[a][b]}function zb(a){d.input.deleteMoveCallback(Da)}function Ab(){A+=T.length+H.length;for(var a=0;a<T.length;a++){var b=T[a].y,c=T[a].x,d=k[b][c].gemSprite;d.events.onAnimationComplete.add(function(){A--;oa()});d.play("explode",30,!1,!0);Qa(b,c);k[b][c]=-1}}function Bb(){for(var a=0;a<H.length;a++){var b=H[a].y,c=H[a].x,f=H[a].gemType,e=H[a].bonusType;k[b][c].gemSprite.kill();k[b][c]=-1;Qa(b,c);wb(b,c,f,e);e=k[b][c].gemSprite;b=d.add.tween(e).to({x:e.position.x+
5},50,Phaser.Easing.Bounce.InOut,!1,0,0,!0);c=d.add.tween(e).to({x:e.position.x-5},50,Phaser.Easing.Bounce.InOut,!1,0,0,!0);f=d.add.tween(e).to({x:e.position.x+5},50,Phaser.Easing.Bounce.InOut,!1,0,0,!0);e=d.add.tween(e).to({x:e.position.x-5},50,Phaser.Easing.Bounce.InOut,!1,0,0,!0);b.chain(c);c.chain(f);f.chain(e);b.start();e.onComplete.add(function(){A--;oa()})}yb();H=[]}function Cb(){A+=R.length;for(var a=0;a<R.length;a++){var b=R[a][0],c=R[a][1],f=R[a][2],e=R[a][3],h=C+g/2+b*g;d.add.tween(k[f][e].gemSprite).to({y:h},
600,Ga,!0).onComplete.add(function(){A--;na()});h=k[b][c];k[b][c]=k[f][e];k[f][e]=h}}function Db(){for(var a=0;a<pa.length;a++){var b=pa[a];A+=b;for(var c=0;c<b;c++){var f=Math.floor(Math.random()*Pa),e=wa(f,-c-1,a),h=C+g/2+(b-c-1)*g;d.add.tween(e).to({y:h},600,Ga,!0).onComplete.add(function(){A--;na()});k[b-c-1][a]=new va(f,1,e)}}}function Eb(){var a=[],b,c;for(b=0;b<p;b++)for(c=0;c<q;c++)a.push(k[b][c]);for(b=a.length;0<b;b--){c=Math.floor(b*Math.random());var d=a[b-1];a[b-1]=a[c];a[c]=d}for(b=
0;b<p;b++)for(c=0;c<q;c++)k[b][c]=a.pop()}function Fb(a){A+=p*q;for(var b=0;b<p;b++)for(var c=0;c<q;c++)yPix=C+(b+.5)*g,xPix=K+(c+.5)*g,d.add.tween(k[b][c].gemSprite).to({y:yPix,x:xPix},600,Ga,!0).onComplete.add(function(){A--;0===A&&a()})}function Gb(){ka=!0;m=null;if(0===O){la=!0;D+=Math.floor(D/(ma-N)*N);var a=("        "+D).slice(-8);ja.setText("Score: "+a);a=d.add.text(d.world.centerX,d.world.centerY,"You Won!",{font:"bold 40pt Arial",fill:"#000"});a.anchor.setTo(.5,.5);aa(G,S++,Aa());aa(G,S++,
"-1--1--1--1");Ya(v,G,D,I,!0);Za()}else 0===N&&(la=!0,a=d.add.text(d.world.centerX,d.world.centerY,"Game Over",{font:"bold 40pt Arial",fill:"#000"}),a.anchor.setTo(.5,.5),aa(G,S++,Aa()),aa(G,S++,"-1--1--1--1"),Ya(v,G,D,I,!1),Za())}function na(){if(0===A)if(sa()){U=e();var a=hb(),b=ib(),c;for(c in b)for(var d in b[c])U[c][d]=b[c][d];for(c in a)for(d in a[c])U[c][d]=a[c][d];jb();fa=!0;oa()}else $a(Gb)}function oa(){if(0===A)if(La(da)||La(ea)){J=e();da=Ka(da,fa);ea=Ka(ea,!fa);fa=!fa;T=[];H=[];Fa=0;for(var a in J)for(var b in J[a])1!==
J[a][b].bonusType&&Fa++,void 0===U[a][b]&&-1!==k[a][b]&&T.push({y:a,x:b});for(a in U)for(b in U[a]){var c=U[a][b];H.push({y:a,x:b,gemType:c.gemType,bonusType:c.bonusType})}Ab();Bb();oa()}else{R=[];pa=[];for(a=0;a<k[0].length;a++){b=0;for(c=k.length-1;0<=c&&-1!==k[c][a];c--)b++;for(var d=c-1;0<=d;d--)-1!==k[d][a]&&(R.push([c--,a,d,a]),b++);pa.push(p-b)}Cb();Db();ia++;na()}}function $a(a){for(var b=!1;!mb()||sa();)Eb(),b=!0;b?setTimeout(function(){Fb(a)},0):a()}function Za(){I=(I+1)%3;var a=(I+2)%3,
b=I%3,c="Level"+a,f="tabLevel"+b;b="Level"+b;document.getElementById("tabLevel"+a).classList.remove("active");document.getElementById(c).classList.remove("active");document.getElementById(f).classList.add("active");document.getElementById(b).classList.add("active");document.getElementById("prog-danger").style.width="0%";document.getElementById("prog-warning").style.width="0%";document.getElementById("prog-success").style.width="0%";d.input.onDown.add(Ha.create);d.add.text(d.world.centerX,d.world.centerY+
l/4,"Click for next level",{font:"bold 32pt Helvetica",fill:"#000"}).anchor.setTo(.5,.5)}function Hb(a,b,c){$.post("php/start_file.php",{gameID:a,moves:b,medals:c},function(a,b){})}function aa(a,b,c){$.post("php/add_data.php",{gameID:a,dataString:b+"\t"+c},function(a,b){})}function Ya(a,b,c,d,e){$.post("php/scores_db.php",{operationType:"sendScore",nickname:a,gameID:b,score:c,level:d,win:e},function(b,c){Ca(a);ba(0);ba(1);ba(2)})}function ba(a){$.post("php/scores_db.php",{operationType:"getHighScores",
level:a},function(b,c){0===a?document.getElementById("Level0").innerHTML=b:1===a?document.getElementById("Level1").innerHTML=b:2===a&&(document.getElementById("Level2").innerHTML=b);0===--Ib&&(v?Ca(v):Sa());Ta()})}function Ca(a){$.post("php/scores_db.php",{operationType:"getUserScore",nickname:a},function(b,c){document.getElementById("userScoreTitle").innerHTML="High Score: "+a;document.getElementById("userHighScore").innerHTML=b;Ta()})}var H=[],T=[],R=[],pa=[],Fa=0,V=[],W=[],da=e(),ea=e(),J=e(),
U=e(),p=9,q=9,ma,N,Pa=6,ha=5,la=!1,I=0,Jb=[3,4,5],Kb=[5,7,9],Lb=[20,25,30],Ra,S,ab=window,bb=document,cb=bb.documentElement,db=bb.getElementsByTagName("body")[0],eb=ab.innerWidth||cb.clientWidth||db.clientWidth,fb=ab.innerHeight||cb.clientHeight||db.clientHeight;if(4*(eb-20)/3<.8*fb){var x=eb-20;var l=4*x/3}else l=Math.min(.8*fb,600),x=3*l/4;var g=(x-x/50)/q,K=(x-q*g)/2,C=l/64,u=.9*g,qa=.7*g,Ga=Phaser.Easing.Linear.None,ia=1,Z=[],m,xa,gb,za,ya,k=[],z=[],Y=[],Ba=[],D=0,O,ra={fontSize:26*l/600+"px",
fill:"#000"},G,Ua=!1;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,
4)))Ua=!0;var ja,Wa,Xa,Ma=[[[0,1],[1,0],[2,0]],[[0,1],[1,1],[2,0]],[[0,0],[1,1],[2,0]],[[0,1],[1,0],[2,1]],[[0,0],[1,0],[2,1]],[[0,0],[1,1],[2,1]],[[0,0],[0,2],[0,3]],[[0,0],[0,1],[0,3]]];(function(a){String.prototype.repeat=function(a){return Array(a+1).join(this)};Array.prototype.unique=function(){var a,b;var d=this.concat();for(a=0;a<d.length;++a)for(b=a+1;b<d.length;++b)d[a]===d[b]&&d.splice(b,1);return d};var b={replaceWith:"*",customSwears:null,externalSwears:null,filter:!0,profaneText:function(){}};
a.fn.profanityFilter=function(c,d){function e(a){function b(a){var b,c=[];for(b=0;b<a.childNodes.length;b+=1)c[b]=a.childNodes[b];return c}for(var c=[],d=b(a);d.length;)a=d.shift(),1===a.nodeType&&d.unshift.apply(d,b(a)),3===a.nodeType&&c.push(a);return c}function f(a){var b=new XMLHttpRequest;b.open("GET",a,!1);b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.send(null);try{return JSON.parse(b.responseText)}catch(qb){return""}}var g=a.extend({},b,c);var h=function(){var a=new Date;try{localStorage.setItem("uid",
a);var b=localStorage.getItem("uid")==a;localStorage.removeItem("uid");return b&&localStorage}catch(qb){}}();var k=null;return this.each(function(){var b=e(this),c=a(this).find(":input"),d=!1,m=[];var l="localSwears"+g.externalSwears;if(null!==g.externalSwears){if(h){var n=localStorage.getItem(l);null===n&&(n=JSON.stringify(f(g.externalSwears)),localStorage.setItem(l,n));n=JSON.parse(n)}else n=f(g.externalSwears);null!==g.customSwears&&(n=n.concat(g.customSwears).unique())}else null!==g.customSwears&&
(n=g.customSwears);if(null!==n){for(l=0;l<n.length;l+=1){var p=new RegExp(n[l],"gi");var q=g.replaceWith.length-1;var t=Math.floor(Math.random()*q);null==k?k=t:t==k&&0!=q&&(t+=1);t>q&&(t=0);k=t;q=g.replaceWith[t];"string"==typeof g.replaceWith&&(q=g.replaceWith[t].repeat(n[l].length));for(t=0;t<b.length;t+=1)p.test(b[t].nodeValue)&&(d=!0,m.push(n[l]),g.filter&&(b[t].nodeValue=b[t].nodeValue.replace(p,q)));for(t=0;t<c.length;t++)p.test(c[t].value)&&(d=!0,m.push(n[l]),g.filter&&a(c[t]).val(c[t].value.replace(p,
q)))}d&&g.profaneText(m.unique())}})}})(jQuery);var ka=!0,E,F,P,Q,X,A,fa,Ha={create:function(){d.input.onDown.remove(Ha.create);G=(new Date).getTime()+"-"+Math.floor(1E16*Math.random());la=!1;S=D=0;ma=N=Lb[I];Ra=O=Jb[I];ha=Kb[I];d.physics.startSystem(Phaser.Physics.ARCADE);var a=d.add.sprite(0,0,"stone");a.height=l;a.width=x;a=d.add.sprite(0,l/30,"ground");a.height=l;a.width=x;a=d.add.sprite(K,C,"grid");a.height=a.width=p*g;xa=d.add.group();gb=d.add.group();za=d.add.group();ya=d.add.group();ob(O,
xa);rb(gb);sb(za);$a(function(){});Hb(G,N,O);d.input.onDown.add(xb);d.input.onUp.add(zb);a="        0".slice(-8);var b=("      "+N).slice(-6),c=("      "+O).slice(-6),e=16*x/450;ja=d.add.text(e,l-3*qa,"Score: "+a,ra);Wa=d.add.text(e,l-2*qa,"Moves left: "+b,ra);Xa=d.add.text(e,l-1*qa,"Medals left: "+c,ra);d.add.text(x-x/4,l-1*qa,"Level: "+(I+1),ra)}};document.getElementById("progress").style.width=x+"px";var d=new Phaser.Game(x,l,Phaser.AUTO,"game");d.state.add("load",{preload:function(){d.add.text(d.world.centerX,
d.world.centerY,"loading...",{font:"30px Helvetica",fill:"#ffffff"}).anchor.setTo(.5);d.load.image("stone","assets/stone_light_2.jpg");d.load.image("ground","assets/ground.png");d.load.image("grid","assets/grid.png");d.load.atlasJSONArray("threematch","assets/threematch.png","assets/threematch.json")},create:function(){d.state.start("intro")}});d.state.add("intro",{create:function(){var a=d.add.sprite(0,0,"stone");a.height=l;a.width=x;d.add.text(d.world.centerX,d.world.centerY-5*l/16,"Gem Island",
{font:"30px Serif",fill:"#000"}).anchor.setTo(.5);a=d.add.text(d.world.centerX,d.world.centerY-2*l/16,"Match 3 or more gems to",{font:"22px Arial",fill:"#000"});a.anchor.setTo(.5);a=d.add.text(d.world.centerX,d.world.centerY-1*l/16,"earn points and clear ice.",{font:"22px Arial",fill:"#000"});a.anchor.setTo(.5);a=d.add.text(d.world.centerX,d.world.centerY+1*l/16,"Free the medals under",{font:"22px Arial",fill:"#000"});a.anchor.setTo(.5);a=d.add.text(d.world.centerX,d.world.centerY+2*l/16,"the ice to win!",
{font:"22px Arial",fill:"#000"});a.anchor.setTo(.5);a=d.add.text(d.world.centerX,d.world.centerY+7*l/16,"Click to start!",{font:"26px Helvetica",fill:"#000"});a.anchor.setTo(.5);a=d.add.sprite(d.world.centerX-1*x/8,d.world.centerY-4*l/16,"threematch","stone0/01");a.anchor.setTo(.5,.5);a=d.add.sprite(d.world.centerX,d.world.centerY-4*l/16,"threematch","stone2/01");a.anchor.setTo(.5,.5);a=d.add.sprite(d.world.centerX+1*x/8,d.world.centerY-4*l/16,"threematch","stone3/01");a.anchor.setTo(.5,.5);a=d.add.sprite(d.world.centerX,
d.world.centerY+4*l/16,"threematch","medal/01");a.anchor.setTo(.5,.5);a.width=2*u;a.height=2*u;var b=Phaser.Animation.generateFrameNames("medal/",1,4,"",2),c=Phaser.Animation.generateFrameNames("medal/",4,1,"",2);b.push(c);a.animations.add("spin",b,10,!0);a.play("spin");d.input.onDown.add(this.start)},start:function(){d.state.start("play")}});d.state.add("play",Ha);d.state.start("load");document.getElementById("changeName").onclick=Sa;var v=localStorage.nickName||"",Ib=3;ba(0);ba(1);ba(2)})();
