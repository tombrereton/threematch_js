var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(f,h,n){f instanceof String&&(f=String(f));for(var y=f.length,B=0;B<y;B++){var ca=f[B];if(h.call(n,ca,B,f))return{i:B,v:ca}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,h,n){f!=Array.prototype&&f!=Object.prototype&&(f[h]=n.value)};
$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(f,h,n,y){if(h){n=$jscomp.global;f=f.split(".");for(y=0;y<f.length-1;y++){var B=f[y];B in n||(n[B]={});n=n[B]}f=f[f.length-1];y=n[f];h=h(y);h!=y&&null!=h&&$jscomp.defineProperty(n,f,{configurable:!0,writable:!0,value:h})}};
$jscomp.polyfill("Array.prototype.find",function(f){return f?f:function(f,n){return $jscomp.findInternal(this,f,n).v}},"es6","es3");$jscomp.checkStringArgs=function(f,h,n){if(null==f)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(h instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return f+""};
$jscomp.polyfill("String.prototype.repeat",function(f){return f?f:function(f){var h=$jscomp.checkStringArgs(this,null,"repeat");if(0>f||1342177279<f)throw new RangeError("Invalid count value");f|=0;for(var y="";f;)if(f&1&&(y+=h),f>>>=1)h+=h;return y}},"es6","es3");
(function(){function f(){for(var a={},b=0;b<m;b++)a[b]={};return a}function h(a,b){return 0>a||m<=a||0>b||p<=b?-1:k[a][b].gemType}function n(a,b){return-1!==k[a][b]?{y:a,x:b,gem:k[a][b]}:-1}function y(a,b){return h(a,b)===h(a-1,b)&&h(a,b)===h(a-2,b)||h(a,b)===h(a,b-1)&&h(a,b)===h(a,b-2)}function B(a){for(var b,c=[],d=a?m:p,e=a?p:m,w=0;w<d;w++)for(var f=-1,g=1,h=0;h<e;h++){var r=(a?k[w][h]:k[h][w]).gemType;r===f&&void 0!==r?(g++,3===g?(b=a?{y:w,x:h-2,gemType:r,matchLength:g}:{y:h-2,x:w,gemType:r,matchLength:g},
c.push(b)):3<g&&b.matchLength++):(f=r,g=1)}return c}function ca(a,b){a.forEach(function(a){a.orientation=b})}function ua(){W=B(!0);ca(W,0);X=B(!1);ca(X,1);return W.length||X.length}function La(a){return 3<a.matchLength}function va(a){for(var b=[],c=0;c<a.matchLength;c++)b.push(n(a.orientation?a.y+c:a.y,a.orientation?a.x:a.x+c));return b}function jb(){var a=f();W.filter(La).concat(X.filter(La)).forEach(function(b){var c=b.y,d=b.x,e={gemType:b.gemType,bonusType:4<b.matchLength?3:2};void 0!==Y&&va(b).forEach(function(a){Y.forEach(function(b){a.y===
b[0]&&a.x===b[1]&&(c=a.y,d=a.x)})});a[c][d]=e});return a}function kb(){var a=f();W.forEach(function(b){X.forEach(function(c){b.gemType===c.gemType&&c.y<=b.y&&b.y<=c.y+c.matchLength&&b.x<=c.x&&c.x<=b.x+b.matchLength&&(a[b.y][c.x]={gemType:b.gemType,bonusType:4})})});return a}function Ma(a,b){b.forEach(function(b){a[b.y][b.x]=b.gem})}function wa(a,b,c){b.forEach(function(b){void 0===c[b.y][b.x]&&(a[b.y][b.x]=b.gem)})}function lb(){da=f();ea=f();W.forEach(function(a){Ma(da,va(a))});X.forEach(function(a){Ma(ea,
va(a))})}function mb(a,b,c){b=[];for(c=0;c<p;c++)-1!==k[a][c]&&b.push(n(a,c));return b}function nb(a,b,c){a=[];for(c=0;c<m;c++)-1!==k[c][b]&&a.push(n(c,b));return a}function Na(a,b){var c=f(),d;for(d in a)for(var e in a[d]){var w=a[d][e];if(void 0===J[d][e]){J[d][e]=w;var g=!0}else g=!1;if(g)switch(w.bonusType){case 2:wa(c,(b?mb:nb)(d,e,w),J);break;case 3:g=[];w=w.gemType;for(var h=0;h<m;h++)for(var l=0;l<p;l++){var r=k[h][l];-1!==r&&r.gemType===w&&g.push(n(h,l))}wa(c,g,J);break;case 4:r=d;l=e;g=
[];r=parseInt(r);l=parseInt(l);w=Math.min(m,r+2);h=Math.max(0,l-1);l=Math.min(p,l+2);for(r=Math.max(0,r-1);r<w;r++)for(var ha=h;ha<l;ha++)-1!==k[r][ha]&&g.push(n(r,ha));wa(c,g,J)}}return c}function Oa(a){for(var b in a)for(var c in a[b])return!0;return!1}function ob(){for(var a=0;a<k.length;a++)for(var b=0;b<k[a].length;b++)for(var c=0;c<Pa.length;c++){var d=Pa[c];if(-1!==h(a+d[0][0],b+d[0][1])&&h(a+d[0][0],b+d[0][1])===h(a+d[1][0],b+d[1][1])&&h(a+d[0][0],b+d[0][1])===h(a+d[2][0],b+d[2][1])||-1!==
h(a+d[0][1],b+d[0][0])&&h(a+d[0][1],b+d[0][0])===h(a+d[1][1],b+d[1][0])&&h(a+d[0][1],b+d[0][0])===h(a+d[2][1],b+d[2][0]))return!0}return!1}function xa(a,b,c){this.gemType=a;this.bonusType=b;this.gemSprite=c}function Qa(a,b){this.layer=a;this.iceSprite=b}function pb(a,b){this.portion=a;this.medalSprite=b}function qb(a,b){ya(S);ya(ia);Z=[];for(var c=0;c<a;){var d=parseInt(Math.random()*ja)+m-ja,e=parseInt(Math.random()*p),f;a:if(d<m-1&&e<p-1){for(f=0;2>f;f++)for(var g=0;2>g;g++)if(-1!==S[d+f][e+g]){f=
!1;break a}f=!0}else f=!1;if(f){f=b;for(g=0;2>g;g++)for(var h=0;2>h;h++){var k=h+2*g,r=d+g,l=e+h;if(0===k){var n=rb(d,e);f.add(n)}else n=void 0;S[r][l]=new pb(k,n);0===k&&Z.push([r,l,k])}c++}}}function tb(a){ya(z);for(var b=0;b<m;b++)for(var c=0;c<p;c++)if(b>=m-ja){var d=e.add.sprite(K+g/2+c*g,C+g/2+b*g,"threematch","ice");d.anchor.setTo(.5,.5);d.width=1.05*g;d.height=1.05*g;a.add(d);z[b][c]=new Qa(1,d)}else z[b][c]=new Qa(-1,null)}function ub(a){for(var b=0;b<m;b++){k[b]=[];for(var c=0;c<p;c++){do{var d=
Math.floor(Math.random()*Ra);k[b][c]=new xa(d,1,e)}while(y(b,c));var e=za(d,b,c);k[b][c].gemSprite=e;a.add(e)}}l=null}function ya(a){for(var b=0;b<m;b++){a[b]=[];for(var c=0;c<p;c++)a[b][c]=-1}}function za(a,b,c){b=C+g/2+b*g;c=K+g/2+c*g;this.gemType=a;c=e.add.sprite(c,b,"threematch","stone"+a+"/01");c.anchor.setTo(.5,.5);c.width=u;c.height=u;c.inputEnabled=!0;c.animations.add("explode",[1,2,3,4,5,6,7,8,9],25,!1);c.animations.add("type2",["stone"+a+"/02"],5,!1);c.animations.add("type3",["stone"+a+
"/03"],10,!1);c.animations.add("type4",["stone"+a+"/04"],10,!1);return c}function rb(a,b){a=e.add.sprite(K+g+b*g,C+g+a*g,"threematch","medal/01");a.anchor.setTo(.5,.5);a.width=2*u;a.height=2*u;b=Phaser.Animation.generateFrameNames("medal/",1,4,"",2);var c=Phaser.Animation.generateFrameNames("medal/",4,1,"",2);b.push(c);a.animations.add("spin",b,10,!0).onLoop.add(vb,this);return a}function Sa(a,b){-1!==z[a][b]&&e.add.tween(z[a][b].iceSprite).to({alpha:0},800,Phaser.Easing.Linear.None,!0,0,0,!1).onComplete.add(function(){-1!==
z[a][b]&&z[a][b].iceSprite.kill();z[a][b]=-1;for(var c=0;c<Z.length;c++){var d=Z[c][0],e=Z[c][1],f;if(f=-1===z[d][e])a:{for(f=0;2>f;f++)for(var g=0;2>g;g++)if(-1!==z[d+f][e+g]){f=!1;break a}f=!0}f&&(wb(d,e),Z.splice(c,1))}})}function wb(a,b){xb();D+=4E3*(ka-1);var c=("        "+D).slice(-8);la.setText("Score: "+c);var d=S[a][b].medalSprite;Aa.remove(d);Ba.add(d);e.world.bringToTop(Ba);d.events.onAnimationComplete.add(function(){d.kill()});d.scale.setTo(2);d.x=e.world.centerX;d.y=e.world.centerY;d.anchor.setTo(.5,
.5);d.play("spin");for(c=0;2>c;c++)for(var f=0;2>f;f++)S[a+c][b+f]=-1}function vb(a,b){3===b.loopCount&&(b.loop=!1)}function yb(a,b,c,d){var e=za(c,a,b);2===d?e.play("type2"):3===d?e.play("type3"):4===d&&e.play("type4");k[a][b]=new xa(c,d,e);Ca.add(e)}function Da(){for(var a=""+D+"\t"+(Ta-O)+"\t",b=0;b<m;b++)for(var c=0;c<p;c++){var d=Ea[b][c].gemType+"\t"+Ea[b][c].bonusType+"\t",e=-1;-1!==z[b][c]&&(e=z[b][c].layer);var f="-1";-1!==ia[b][c]?f=ia[b][c]:-1===z[b][c]&&-1!==S[b][c]&&(f=S[b][c].portion,
ia[b][c]=f);d=d+e+"\t"+f+"\t";a+=d}return a}function Ua(){var a="Please enter your nickname for scoring:";for(v="";!v;)v=prompt(a),!v||v.match(/^ +$/)?(v="default",localStorage.nickName=""):v.match(/^.{21,}$/)?(a="Please enter your nickname for scoring, 20 characters max:",v=""):v.match(/[^\w ]/)?(a="Please enter your nickname for scoring, alphanumerics and spaces only:",v=""):localStorage.nickName=v;Fa(v)}function Va(){$(document).profanityFilter({externalSwears:"js/swearWords.json"})}function zb(a){ma&&
!na&&(Wa?(E=Math.floor((e.input.pointer1.y-C)/g),F=Math.floor((e.input.pointer1.x-K)/g)):(E=Math.floor((e.input.mousePointer.y-C)/g),F=Math.floor((e.input.mousePointer.x-K)/g)),a=Xa(E,F),-1!==a&&(null===l?(a.gemSprite.height=1.2*u,a.gemSprite.width=1.2*u,a.gemSprite.bringToTop(),l=a,P=E,Q=F,Y=[[E,F],[P,Q]],e.input.addMoveCallback(Ga)):(Y=[[E,F],[P,Q]],a===l?(l.gemSprite.width=u,l.gemSprite.height=u,Q=P=l=null):1===Math.abs(E-P)+Math.abs(F-Q)?(l.gemSprite.width=u,l.gemSprite.height=u,Ha(l,a,!0)):(l.gemSprite.width=
u,l.gemSprite.height=u,a.gemSprite.height=1.2*u,a.gemSprite.width=1.2*u,l=a,P=E,Q=F))))}function Ha(a,b,c){ma=!1;Ea=$.extend(!0,[],k);var d=k[L(a)][M(a)].gemSprite,f=k[L(b)][M(b)].gemSprite,h=C+g/2+L(b)*g,n=K+g/2+M(b)*g,m=C+g/2+L(a)*g,q=K+g/2+M(a)*g;e.add.tween(d).to({y:h,x:n},200,Phaser.Easing.Linear.None,!0);d=e.add.tween(f).to({y:m,x:q},200,Phaser.Easing.Linear.None,!0);f=k[L(a)][M(a)];k[L(a)][M(a)]=b;k[L(b)][M(b)]=f;d.onComplete.add(function(){var d=ua();if(!d&&c)Ha(a,b,!1);else if(d){N--;d=("      "+
N).slice(-6);Ya.setText("Moves: "+d);d=100/oa*(oa-N);50>=d?document.getElementById("prog-success").style.width=d+"%":75>=d?(d-=50,document.getElementById("prog-success").style.width="50%",document.getElementById("prog-warning").style.width=d+"%"):(d-=75,document.getElementById("prog-warning").style.width="25%",document.getElementById("prog-danger").style.width=d+"%");aa(G,T++,Da());d=aa;var e=G,f=T++,g=Y;g=g[0][0].valueOf()+"-"+g[0][1]+"-"+g[1][0]+"-"+g[1][1];d(e,f,g);ka=1;A=0;pa();l=null}else l=
null,ma=!0})}function Ga(a,b,c){if(0===a.id&&null!==l){a=b-l.gemSprite.x;c-=l.gemSprite.y;var d=b=0;Math.abs(a)>g/2?(d=0<a?1:-1,b=0):Math.abs(c)>g/2&&(b=0<c?1:-1,d=0);0!==b+d&&(E=L(l),F=M(l),a=Xa(E+b,F+d),-1!==a&&(P=L(a),Q=M(a),Y=[[E,F],[P,Q]],e.input.deleteMoveCallback(Ga),l.gemSprite.width=u,l.gemSprite.height=u,Ha(l,a,!0)))}}function Ab(){D+=100*ka*(U.length+H.length+5*Ia);var a=("        "+D).slice(-8);la.setText("Score: "+a)}function xb(){O--;var a=("      "+O).slice(-6);Za.setText("Medals: "+
a)}function L(a){return Math.floor(a.gemSprite.y/g)}function M(a){return Math.floor(a.gemSprite.x/g)}function Xa(a,b){return 0>a||a>=m||0>b||b>=p?-1:k[a][b]}function Bb(a){e.input.deleteMoveCallback(Ga)}function Cb(){A+=U.length+H.length;for(var a=0;a<U.length;a++){var b=U[a].y,c=U[a].x,d=k[b][c].gemSprite;d.events.onAnimationComplete.add(function(){A--;qa()});d.play("explode",30,!1,!0);Sa(b,c);k[b][c]=-1}}function Db(){for(var a=0;a<H.length;a++){var b=H[a].y,c=H[a].x,d=H[a].gemType,f=H[a].bonusType;
k[b][c].gemSprite.kill();k[b][c]=-1;Sa(b,c);yb(b,c,d,f);f=k[b][c].gemSprite;b=e.add.tween(f).to({x:f.position.x+5},50,Phaser.Easing.Bounce.InOut,!1,0,0,!0);c=e.add.tween(f).to({x:f.position.x-5},50,Phaser.Easing.Bounce.InOut,!1,0,0,!0);d=e.add.tween(f).to({x:f.position.x+5},50,Phaser.Easing.Bounce.InOut,!1,0,0,!0);f=e.add.tween(f).to({x:f.position.x-5},50,Phaser.Easing.Bounce.InOut,!1,0,0,!0);b.chain(c);c.chain(d);d.chain(f);b.start();f.onComplete.add(function(){A--;qa()})}Ab();H=[]}function Eb(){A+=
R.length;for(var a=0;a<R.length;a++){var b=R[a][0],c=R[a][1],d=R[a][2],f=R[a][3],h=C+g/2+b*g;e.add.tween(k[d][f].gemSprite).to({y:h},600,Ja,!0).onComplete.add(function(){A--;pa()});h=k[b][c];k[b][c]=k[d][f];k[d][f]=h}}function Fb(){for(var a=0;a<ra.length;a++){var b=ra[a];A+=b;for(var c=0;c<b;c++){var d=Math.floor(Math.random()*Ra),f=za(d,-c-1,a),h=C+g/2+(b-c-1)*g;e.add.tween(f).to({y:h},600,Ja,!0).onComplete.add(function(){A--;pa()});k[b-c-1][a]=new xa(d,1,f)}}}function Gb(){var a=[],b,c;for(b=0;b<
m;b++)for(c=0;c<p;c++)a.push(k[b][c]);for(b=a.length;0<b;b--){c=Math.floor(b*Math.random());var d=a[b-1];a[b-1]=a[c];a[c]=d}for(b=0;b<m;b++)for(c=0;c<p;c++)k[b][c]=a.pop()}function Hb(a){A+=m*p;for(var b=0;b<m;b++)for(var c=0;c<p;c++)yPix=C+(b+.5)*g,xPix=K+(c+.5)*g,e.add.tween(k[b][c].gemSprite).to({y:yPix,x:xPix},600,Ja,!0).onComplete.add(function(){A--;0===A&&a()})}function Ib(){ma=!0;l=null;if(0===O){na=!0;D+=Math.floor(D/(oa-N)*N);var a=("        "+D).slice(-8);la.setText("Score: "+a);a=e.add.text(e.world.centerX,
e.world.centerY,"You Won!",{font:"bold 40pt Arial",fill:"#000"});a.anchor.setTo(.5,.5);aa(G,T++,Da());aa(G,T++,"-1--1--1--1");$a(v,G,D,I,!0);ab()}else 0===N&&(na=!0,a=e.add.text(e.world.centerX,e.world.centerY,"Game Over",{font:"bold 40pt Arial",fill:"#000"}),a.anchor.setTo(.5,.5),aa(G,T++,Da()),aa(G,T++,"-1--1--1--1"),$a(v,G,D,I,!1),ab())}function pa(){if(0===A)if(ua()){V=f();var a=jb(),b=kb(),c;for(c in b)for(var d in b[c])V[c][d]=b[c][d];for(c in a)for(d in a[c])V[c][d]=a[c][d];lb();fa=!0;qa()}else bb(Ib)}
function qa(){if(0===A)if(Oa(da)||Oa(ea)){J=f();da=Na(da,fa);ea=Na(ea,!fa);fa=!fa;U=[];H=[];Ia=0;for(var a in J)for(var b in J[a])1!==J[a][b].bonusType&&Ia++,void 0===V[a][b]&&-1!==k[a][b]&&U.push({y:a,x:b});for(a in V)for(b in V[a]){var c=V[a][b];H.push({y:a,x:b,gemType:c.gemType,bonusType:c.bonusType})}Cb();Db();qa()}else{R=[];ra=[];for(a=0;a<k[0].length;a++){b=0;for(c=k.length-1;0<=c&&-1!==k[c][a];c--)b++;for(var d=c-1;0<=d;d--)-1!==k[d][a]&&(R.push([c--,a,d,a]),b++);ra.push(m-b)}Eb();Fb();ka++;
pa()}}function bb(a){for(var b=!1;!ob()||ua();)Gb(),b=!0;b?setTimeout(function(){Hb(a)},0):a()}function ab(){I=(I+1)%3;var a=(I+2)%3,b=I%3,c="Level"+a,d="tabLevel"+b;b="Level"+b;document.getElementById("tabLevel"+a).classList.remove("active");document.getElementById(c).classList.remove("active");document.getElementById(d).classList.add("active");document.getElementById(b).classList.add("active");document.getElementById("prog-danger").style.width="0%";document.getElementById("prog-warning").style.width=
"0%";document.getElementById("prog-success").style.width="0%";e.input.onDown.add(Ka.create);e.add.text(e.world.centerX,e.world.centerY+q/4,"Click for next level",{font:"bold 32pt Helvetica",fill:"#000"}).anchor.setTo(.5,.5)}function Jb(a,b,c){$.post("php/start_file.php",{gameID:a,moves:b,medals:c},function(a,b){})}function aa(a,b,c){$.post("php/add_data.php",{gameID:a,dataString:b+"\t"+c},function(a,b){})}function $a(a,b,c,d,e){$.post("php/scores_db.php",{operationType:"sendScore",nickname:a,gameID:b,
score:c,level:d,win:e},function(b,c){Fa(a);ba(0);ba(1);ba(2)})}function ba(a){$.post("php/scores_db.php",{operationType:"getHighScores",level:a},function(b,c){0===a?document.getElementById("Level0").innerHTML=b:1===a?document.getElementById("Level1").innerHTML=b:2===a&&(document.getElementById("Level2").innerHTML=b);0===--Kb&&(v?Fa(v):Ua());Va()})}function Fa(a){$.post("php/scores_db.php",{operationType:"getUserScore",nickname:a},function(b,c){document.getElementById("userScoreTitle").innerHTML="High Score: "+
a;document.getElementById("userHighScore").innerHTML=b;Va()})}var H=[],U=[],R=[],ra=[],Ia=0,W=[],X=[],da=f(),ea=f(),J=f(),V=f(),m=9,p=9,oa,N,Ra=6,ja=5,na=!1,I=0,Lb=[3,4,5],Mb=[5,7,9],Nb=[20,25,30],Ta,T,cb=window,db=document,eb=db.documentElement,fb=db.getElementsByTagName("body")[0],gb=cb.innerWidth||eb.clientWidth||fb.clientWidth,hb=cb.innerHeight||eb.clientHeight||fb.clientHeight;if(4*(gb-20)/3<.8*hb){var x=gb-20;var q=4*x/3}else q=Math.min(.8*hb,600),x=3*q/4;var g=(x-x/50)/p,K=(x-p*g)/2,C=q/64,
u=.9*g,sa=.7*g,Ja=Phaser.Easing.Linear.None,ka=1,Z=[],l,Aa,ib,Ca,Ba,k=[],z=[],S=[],ia=[],Ea=[],D=0,O,ta={fontSize:26*q/600+"px",fill:"#000"},G,Wa=!1;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,
4)))Wa=!0;var la,Ya,Za,Pa=[[[0,1],[1,0],[2,0]],[[0,1],[1,1],[2,0]],[[0,0],[1,1],[2,0]],[[0,1],[1,0],[2,1]],[[0,0],[1,0],[2,1]],[[0,0],[1,1],[2,1]],[[0,0],[0,2],[0,3]],[[0,0],[0,1],[0,3]]];(function(a){String.prototype.repeat=function(a){return Array(a+1).join(this)};Array.prototype.unique=function(){var a,b;var e=this.concat();for(a=0;a<e.length;++a)for(b=a+1;b<e.length;++b)e[a]===e[b]&&e.splice(b,1);return e};var b={replaceWith:"*",customSwears:null,externalSwears:null,filter:!0,profaneText:function(){}};
a.fn.profanityFilter=function(c,d){function e(a){function b(a){var b,c=[];for(b=0;b<a.childNodes.length;b+=1)c[b]=a.childNodes[b];return c}for(var c=[],d=b(a);d.length;)a=d.shift(),1===a.nodeType&&d.unshift.apply(d,b(a)),3===a.nodeType&&c.push(a);return c}function f(a){var b=new XMLHttpRequest;b.open("GET",a,!1);b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.send(null);try{return JSON.parse(b.responseText)}catch(sb){return""}}var g=a.extend({},b,c);var h=function(){var a=new Date;try{localStorage.setItem("uid",
a);var b=localStorage.getItem("uid")==a;localStorage.removeItem("uid");return b&&localStorage}catch(sb){}}();var k=null;return this.each(function(){var b=e(this),c=a(this).find(":input"),d=!1,l=[];var n="localSwears"+g.externalSwears;if(null!==g.externalSwears){if(h){var m=localStorage.getItem(n);null===m&&(m=JSON.stringify(f(g.externalSwears)),localStorage.setItem(n,m));m=JSON.parse(m)}else m=f(g.externalSwears);null!==g.customSwears&&(m=m.concat(g.customSwears).unique())}else null!==g.customSwears&&
(m=g.customSwears);if(null!==m){for(n=0;n<m.length;n+=1){var q=new RegExp(m[n],"gi");var p=g.replaceWith.length-1;var t=Math.floor(Math.random()*p);null==k?k=t:t==k&&0!=p&&(t+=1);t>p&&(t=0);k=t;p=g.replaceWith[t];"string"==typeof g.replaceWith&&(p=g.replaceWith[t].repeat(m[n].length));for(t=0;t<b.length;t+=1)q.test(b[t].nodeValue)&&(d=!0,l.push(m[n]),g.filter&&(b[t].nodeValue=b[t].nodeValue.replace(q,p)));for(t=0;t<c.length;t++)q.test(c[t].value)&&(d=!0,l.push(m[n]),g.filter&&a(c[t]).val(c[t].value.replace(q,
p)))}d&&g.profaneText(l.unique())}})}})(jQuery);var ma=!0,E,F,P,Q,Y,A,fa,Ka={create:function(){e.input.onDown.remove(Ka.create);G=(new Date).getTime()+"-"+Math.floor(1E16*Math.random());na=!1;T=D=0;oa=N=Nb[I];Ta=O=Lb[I];ja=Mb[I];e.physics.startSystem(Phaser.Physics.ARCADE);var a=e.add.sprite(0,0,"stone");a.height=q;a.width=x;a=e.add.sprite(0,q/30,"ground");a.height=q;a.width=x;a=e.add.sprite(K,C,"grid");a.height=a.width=m*g;Aa=e.add.group();ib=e.add.group();Ca=e.add.group();Ba=e.add.group();qb(O,
Aa);tb(ib);ub(Ca);bb(function(){});Jb(G,N,O);e.input.onDown.add(zb);e.input.onUp.add(Bb);a="        0".slice(-8);var b=("      "+N).slice(-6),c=("      "+O).slice(-6),d=16*x/450;la=e.add.text(d,q-3*sa,"Score: "+a,ta);Ya=e.add.text(d,q-2*sa,"Moves: "+b,ta);Za=e.add.text(d,q-1*sa,"Medals: "+c,ta);e.add.text(x-x/4,q-1*sa,"Level: "+(I+1),ta)}};document.getElementById("progress").style.width=x+"px";var e=new Phaser.Game(x,q,Phaser.AUTO,"game");e.state.add("load",{preload:function(){e.add.text(e.world.centerX,
e.world.centerY,"loading...",{font:"30px Helvetica",fill:"#ffffff"}).anchor.setTo(.5);e.load.image("stone","assets/stone_light_2.jpg");e.load.image("ground","assets/ground.png");e.load.image("grid","assets/grid.png");e.load.atlasJSONArray("threematch","assets/threematch.png","assets/threematch.json")},create:function(){e.state.start("intro")}});e.state.add("intro",{create:function(){var a=e.add.sprite(0,0,"stone");a.height=q;a.width=x;e.add.text(e.world.centerX,e.world.centerY-q/4,"Gem Island",{font:"30px Helvetica",
fill:"#000"}).anchor.setTo(.5);a=e.add.text(e.world.centerX,e.world.centerY,"Free the medals...",{font:"26px Helvetica",fill:"#000"});a.anchor.setTo(.5);a=e.add.text(e.world.centerX,e.world.centerY+7*q/16,"Click to start",{font:"26px Helvetica",fill:"#000"});a.anchor.setTo(.5);a=e.add.sprite(e.world.centerX-1*x/8,e.world.centerY-3*q/16,"threematch","stone0/01");a.anchor.setTo(.5,.5);a=e.add.sprite(e.world.centerX,e.world.centerY-3*q/16,"threematch","stone2/01");a.anchor.setTo(.5,.5);a=e.add.sprite(e.world.centerX+
1*x/8,e.world.centerY-3*q/16,"threematch","stone3/01");a.anchor.setTo(.5,.5);a=e.add.sprite(e.world.centerX,e.world.centerY+3*q/16,"threematch","medal/01");a.anchor.setTo(.5,.5);a.width=2*u;a.height=2*u;var b=Phaser.Animation.generateFrameNames("medal/",1,4,"",2),c=Phaser.Animation.generateFrameNames("medal/",4,1,"",2);b.push(c);a.animations.add("spin",b,10,!0);a.play("spin");e.input.onDown.add(this.start)},start:function(){e.state.start("play")}});e.state.add("play",Ka);e.state.start("load");document.getElementById("changeName").onclick=
Ua;var v=localStorage.nickName||"",Kb=3;ba(0);ba(1);ba(2)})();
